diff --git a/third_party/llvm/generated.patch b/third_party/llvm/generated.patch
index fedf09a..509398d 100644
--- a/third_party/llvm/generated.patch
+++ b/third_party/llvm/generated.patch
@@ -1,12 +1 @@
 Auto generated patch. Do not edit or delete it, even if empty.
-diff -ruN --strip-trailing-cr a/lldb/unittests/Core/MangledTest.cpp b/lldb/unittests/Core/MangledTest.cpp
---- a/lldb/unittests/Core/MangledTest.cpp
-+++ b/lldb/unittests/Core/MangledTest.cpp
-@@ -605,6 +605,7 @@
-   EXPECT_EQ(get_part(OB.NameInfo.BasenameRange), basename);
-   EXPECT_EQ(get_part(OB.NameInfo.ScopeRange), scope);
-   EXPECT_EQ(get_part(OB.NameInfo.QualifiersRange), qualifiers);
-+  std::free(OB.getBuffer());
- }
- 
- INSTANTIATE_TEST_SUITE_P(DemanglingPartsTests, DemanglingPartsTestFixture,
diff --git a/third_party/llvm/workspace.bzl b/third_party/llvm/workspace.bzl
index 9851b18..24307e6 100644
--- a/third_party/llvm/workspace.bzl
+++ b/third_party/llvm/workspace.bzl
@@ -4,8 +4,8 @@ load("//third_party:repo.bzl", "tf_http_archive")
 
 def repo(name):
     """Imports LLVM."""
-    LLVM_COMMIT = "7752e0a10b25da2f2eadbed10606bd5454dbca05"
-    LLVM_SHA256 = "1e67e67854bf00c07e5f876083cf7482d2ed4719b8d6595179a945f9c9f7ffe7"
+    LLVM_COMMIT = "5060f08c3a98c2e4976d7ec380d9d8ea1888a68c"
+    LLVM_SHA256 = "c39f925d418a9b1e66e9d9995e7ef50cf6a18e2b602186686cb9648455e02e88"
 
     tf_http_archive(
         name = name,
diff --git a/third_party/stablehlo/temporary.patch b/third_party/stablehlo/temporary.patch
index bdca7e0..6164236 100755
--- a/third_party/stablehlo/temporary.patch
+++ b/third_party/stablehlo/temporary.patch
@@ -250,6 +250,15 @@ diff --ruN a/stablehlo/stablehlo/transforms/StablehloRefineShapes.cpp b/stablehl
  
    return success();
  }
+@@ -1094,7 +1094,7 @@
+   size_t firstFunctionalArgument =
+       leadingTokenOperands + key.getGlobalConstants().size();
+   argIndices.set(leadingTokenOperands, firstFunctionalArgument);
+-  func.eraseArguments(argIndices);
++  if (failed(func.eraseArguments(argIndices))) return failure();
+ 
+   // Refine the remaining argument types, wrap with shape buffer custom calls.
+   SmallVector<Type> refinedTypes =
 diff --ruN a/stablehlo/stablehlo/transforms/StablehloWrapInComposite.cpp b/stablehlo/stablehlo/transforms/StablehloWrapInComposite.cpp
 --- stablehlo/stablehlo/transforms/StablehloWrapInComposite.cpp
 +++ stablehlo/stablehlo/transforms/StablehloWrapInComposite.cpp
